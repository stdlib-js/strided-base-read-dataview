{"version":3,"file":"index.mjs","sources":["../lib/ndarray.js","../lib/main.js","../lib/index.js"],"sourcesContent":["/**\n* @license Apache-2.0\n*\n* Copyright (c) 2024 The Stdlib Authors.\n*\n* Licensed under the Apache License, Version 2.0 (the \"License\");\n* you may not use this file except in compliance with the License.\n* You may obtain a copy of the License at\n*\n*    http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing, software\n* distributed under the License is distributed on an \"AS IS\" BASIS,\n* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n* See the License for the specific language governing permissions and\n* limitations under the License.\n*/\n\n/* eslint-disable max-len */\n\n'use strict';\n\n// MODULES //\n\nimport isComplex128Array from '@stdlib/array-base-assert-is-complex128array';\nimport isComplex64Array from '@stdlib/array-base-assert-is-complex64array';\nimport isBooleanArray from '@stdlib/array-base-assert-is-booleanarray';\nimport arraylike2object from '@stdlib/array-base-arraylike2object';\nimport reinterpret128 from '@stdlib/strided-base-reinterpret-complex128';\nimport reinterpret64 from '@stdlib/strided-base-reinterpret-complex64';\nimport reinterpretBoolean from '@stdlib/strided-base-reinterpret-boolean';\nimport bytesPerElement from '@stdlib/ndarray-base-bytes-per-element';\n\n\n// VARIABLES //\n\nvar METHOD_TABLE = {\n\t'float64': 'getFloat64',\n\t'float32': 'getFloat32',\n\t'float16': 'getFloat16',\n\t'int64': 'getBigInt64',\n\t'int32': 'getInt32',\n\t'int16': 'getInt16',\n\t'int8': 'getInt8',\n\t'uint64': 'getBigUint64',\n\t'uint32': 'getUint32',\n\t'uint16': 'getUint16',\n\t'uint8': 'getUint8'\n};\n\n\n// FUNCTIONS //\n\n/**\n* Copies elements from an input strided DataView to elements in a strided indexed array.\n*\n* @private\n* @param {string} dtype - output array data type\n* @param {NonNegativeInteger} N - number of indexed elements\n* @param {DataView} view - input DataView\n* @param {integer} strideView - `view` stride length (in bytes)\n* @param {NonNegativeInteger} offsetView - starting `view` index (in bytes)\n* @param {Object} out - output array object\n* @param {integer} strideOut - `out` stride length\n* @param {NonNegativeInteger} offsetOut - starting `out` index\n* @param {boolean} littleEndian - boolean indicating whether the data is stored in little-endian format\n* @returns {void}\n*\n* @example\n* import Float64Array from '@stdlib/array-float64';\n* import DataView from '@stdlib/array-dataview';\n* import arraylike2object from '@stdlib/array-base-arraylike2object';\n*\n* var x = new Float64Array( [ 1.0, 2.0, 3.0, 4.0 ] );\n* var view = new DataView( x.buffer );\n*\n* var y = new Float64Array( x.length );\n*\n* indexed( 'float64', x.length, view, 8, 0, arraylike2object( y ), 1, 0, true );\n* // e.g., y => <Float64Array>[ 1.0, 2.0, 3.0, 4.0 ]\n*/\nfunction indexed( dtype, N, view, strideView, offsetView, out, strideOut, offsetOut, littleEndian ) {\n\tvar data;\n\tvar io;\n\tvar iv;\n\tvar m;\n\tvar i;\n\n\tm = METHOD_TABLE[ dtype ];\n\n\tdata = out.data;\n\n\tio = offsetOut;\n\tiv = offsetView;\n\tfor ( i = 0; i < N; i++ ) {\n\t\tdata[ io ] = view[ m ]( iv, littleEndian );\n\t\tio += strideOut;\n\t\tiv += strideView;\n\t}\n}\n\n/**\n* Copies elements from an input strided DataView to elements in a strided complex array.\n*\n* @private\n* @param {string} dtype - output array data type\n* @param {NonNegativeInteger} N - number of indexed elements\n* @param {DataView} view - input DataView\n* @param {integer} strideView - `view` stride length (in bytes)\n* @param {NonNegativeInteger} offsetView - starting `view` index (in bytes)\n* @param {Collection} out - output array object\n* @param {integer} strideOut - `out` stride length\n* @param {NonNegativeInteger} offsetOut - starting `out` index\n* @param {boolean} littleEndian - boolean indicating whether the data is stored in little-endian format\n* @returns {void}\n*\n* @example\n* import Float64Array from '@stdlib/array-float64';\n* import DataView from '@stdlib/array-dataview';\n* import arraylike2object from '@stdlib/array-base-arraylike2object';\n*\n* var x = new Float64Array( [ 1.0, 2.0, 3.0, 4.0 ] );\n* var view = new DataView( x.buffer );\n*\n* var y = new Float64Array( x.length );\n*\n* complex( 'float64', 2, view, 8, 0, arraylike2object( y ), 1, 0, true );\n* // e.g., y => <Float64Array>[ 1.0, 2.0, 3.0, 4.0 ]\n*/\nfunction complex( dtype, N, view, strideView, offsetView, out, strideOut, offsetOut, littleEndian ) {\n\tvar nbytes;\n\tvar data;\n\tvar io;\n\tvar iv;\n\tvar m;\n\tvar i;\n\n\tm = METHOD_TABLE[ dtype ];\n\tnbytes = bytesPerElement( dtype );\n\n\tdata = out.data;\n\n\t// Adjust meta data to account for interleaved real and imaginary components:\n\tstrideOut *= 2;\n\toffsetOut *= 2;\n\n\tio = offsetOut;\n\tiv = offsetView;\n\tfor ( i = 0; i < N; i++ ) {\n\t\tdata[ io ] = view[ m ]( iv, littleEndian );\n\t\tdata[ io+1 ] = view[ m ]( iv+nbytes, littleEndian );\n\t\tio += strideOut;\n\t\tiv += strideView;\n\t}\n}\n\n/**\n* Copies elements from an input strided DataView to elements in a strided accessor array.\n*\n* @private\n* @param {string} dtype - output array data type\n* @param {NonNegativeInteger} N - number of indexed elements\n* @param {DataView} view - input DataView\n* @param {integer} strideView - `view` stride length (in bytes)\n* @param {NonNegativeInteger} offsetView - starting `view` index (in bytes)\n* @param {Object} out - output array object\n* @param {integer} strideOut - `out` stride length\n* @param {NonNegativeInteger} offsetOut - starting `out` index\n* @param {boolean} littleEndian - boolean indicating whether the data is stored in little-endian format\n* @returns {void}\n*\n* @example\n* import toAccessorArray from '@stdlib/array-base-to-accessor-array';\n* import arraylike2object from '@stdlib/array-base-arraylike2object';\n* import Float64Array from '@stdlib/array-float64';\n* import DataView from '@stdlib/array-dataview';\n*\n* var x = new Float64Array( [ 1.0, 2.0, 3.0, 4.0 ] );\n* var view = new DataView( x.buffer );\n*\n* var y = new Float64Array( x.length );\n*\n* accessors( 'float64', x.length, view, 8, 0, arraylike2object( toAccessorArray( y ) ), 1, 0, true );\n* // e.g., y => <Float64Array>[ 1.0, 2.0, 3.0, 4.0 ]\n*/\nfunction accessors( dtype, N, view, strideView, offsetView, out, strideOut, offsetOut, littleEndian ) {\n\tvar data;\n\tvar set;\n\tvar io;\n\tvar iv;\n\tvar m;\n\tvar i;\n\n\tm = METHOD_TABLE[ dtype ];\n\n\tdata = out.data;\n\tset = out.accessors[ 1 ];\n\n\tio = offsetOut;\n\tiv = offsetView;\n\tfor ( i = 0; i < N; i++ ) {\n\t\tset( data, io, view[ m ]( iv, littleEndian ) );\n\t\tio += strideOut;\n\t\tiv += strideView;\n\t}\n\treturn view;\n}\n\n\n// MAIN //\n\n/**\n* Copies elements from an input strided DataView to elements in an output strided array.\n*\n* @param {NonNegativeInteger} N - number of indexed elements\n* @param {DataView} view - input DataView\n* @param {integer} strideView - `view` stride length (in bytes)\n* @param {NonNegativeInteger} offsetView - starting `view` index (in bytes)\n* @param {Collection} out - output array\n* @param {integer} strideOut - `out` stride length\n* @param {NonNegativeInteger} offsetOut - starting `out` index\n* @param {boolean} littleEndian - boolean indicating whether the data is stored in little-endian format\n* @returns {Collection} output array\n*\n* @example\n* import Float64Array from '@stdlib/array-float64';\n* import DataView from '@stdlib/array-dataview';\n*\n* var x = new Float64Array( [ 1.0, 2.0, 3.0, 4.0 ] );\n* var view = new DataView( x.buffer );\n*\n* var y = new Float64Array( x.length );\n* var out = readDataView( x.length, view, 8, 0, y, 1, 0, true );\n* // e.g., returns <Float64Array>[ 1.0, 2.0, 3.0, 4.0 ]\n*\n* var bool = ( out === y );\n* // returns true\n*/\nfunction readDataView( N, view, strideView, offsetView, out, strideOut, offsetOut, littleEndian ) {\n\tvar obj;\n\tvar dt;\n\tif ( N <= 0 ) {\n\t\treturn out;\n\t}\n\tobj = arraylike2object( out );\n\tif ( obj.accessorProtocol ) {\n\t\t// If provided a complex number array, reinterpret as a real typed array of interleaved real and imaginary components...\n\t\tif ( isComplex128Array( out ) ) {\n\t\t\tobj.data = reinterpret128( out, 0 );\n\t\t\tcomplex( 'float64', N, view, strideView, offsetView, obj, strideOut, offsetOut, littleEndian );\n\t\t\treturn out;\n\t\t}\n\t\tif ( isComplex64Array( out ) ) {\n\t\t\tobj.data = reinterpret64( out, 0 );\n\t\t\tcomplex( 'float32', N, view, strideView, offsetView, obj, strideOut, offsetOut, littleEndian );\n\t\t\treturn out;\n\t\t}\n\t\t// If provided a boolean array, reinterpret as typed array of integers...\n\t\tif ( isBooleanArray( out ) ) {\n\t\t\tobj.data = reinterpretBoolean( out, 0 );\n\t\t\tindexed( 'uint8', N, view, strideView, offsetView, obj, strideOut, offsetOut, littleEndian );\n\t\t\treturn out;\n\t\t}\n\t\t// If provided a \"generic\" accessor array, assume double-precision floating-point numbers...\n\t\taccessors( 'float64', N, view, strideView, offsetView, obj, strideOut, offsetOut, littleEndian );\n\t\treturn out;\n\t}\n\tif ( obj.dtype === null || obj.dtype === 'generic' ) {\n\t\t// If provided a \"generic\" array, assume double-precision floating-point numbers...\n\t\tdt = 'float64';\n\t} else {\n\t\tdt = obj.dtype;\n\t}\n\tindexed( dt, N, view, strideView, offsetView, obj, strideOut, offsetOut, littleEndian );\n\treturn out;\n}\n\n\n// EXPORTS //\n\nexport default readDataView;\n","/**\n* @license Apache-2.0\n*\n* Copyright (c) 2024 The Stdlib Authors.\n*\n* Licensed under the Apache License, Version 2.0 (the \"License\");\n* you may not use this file except in compliance with the License.\n* You may obtain a copy of the License at\n*\n*    http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing, software\n* distributed under the License is distributed on an \"AS IS\" BASIS,\n* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n* See the License for the specific language governing permissions and\n* limitations under the License.\n*/\n\n'use strict';\n\n// MODULES //\n\nimport stride2offset from '@stdlib/strided-base-stride2offset';\nimport ndarray from './ndarray.js';\n\n\n// MAIN //\n\n/**\n* Copies elements from an input strided DataView to elements in an output strided array.\n*\n* @param {NonNegativeInteger} N - number of indexed elements\n* @param {DataView} view - output DataView\n* @param {integer} strideView - `view` stride length (in bytes)\n* @param {Collection} out - input array\n* @param {integer} strideOut - `out` stride length\n* @param {boolean} littleEndian - boolean indicating whether the data is stored in little-endian format\n* @returns {Collection} output array\n*\n* @example\n* import Float64Array from '@stdlib/array-float64';\n* import DataView from '@stdlib/array-dataview';\n*\n* var x = new Float64Array( [ 1.0, 2.0, 3.0, 4.0 ] );\n* var view = new DataView( x.buffer );\n*\n* var y = new Float64Array( x.length );\n* var out = readDataView( x.length, view, 8, y, 1, true );\n* // e.g., returns <Float64Array>[ 1.0, 2.0, 3.0, 4.0 ]\n*\n* var bool = ( out === y );\n* // returns true\n*/\nfunction readDataView( N, view, strideView, out, strideOut, littleEndian ) {\n\treturn ndarray( N, view, strideView, stride2offset( N, strideView ), out, strideOut, stride2offset( N, strideOut ), littleEndian ); // eslint-disable-line max-len\n}\n\n\n// EXPORTS //\n\nexport default readDataView;\n","/**\n* @license Apache-2.0\n*\n* Copyright (c) 2024 The Stdlib Authors.\n*\n* Licensed under the Apache License, Version 2.0 (the \"License\");\n* you may not use this file except in compliance with the License.\n* You may obtain a copy of the License at\n*\n*    http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing, software\n* distributed under the License is distributed on an \"AS IS\" BASIS,\n* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n* See the License for the specific language governing permissions and\n* limitations under the License.\n*/\n\n'use strict';\n\n/**\n* Copy elements from an input strided DataView to elements in an output strided array.\n*\n* @module @stdlib/strided-base-read-dataview\n*\n* @example\n* import Float64Array from '@stdlib/array-float64';\n* import DataView from '@stdlib/array-dataview';\n* import readDataView from '@stdlib/strided-base-read-dataview';\n*\n* var x = new Float64Array( [ 1.0, 2.0, 3.0, 4.0 ] );\n* var view = new DataView( x.buffer );\n*\n* var y = new Float64Array( x.length );\n* var out = readDataView( x.length, view, 8, y, 1, true );\n* // e.g., returns <Float64Array>[ 1.0, 2.0, 3.0, 4.0 ]\n*\n* var bool = ( out === y );\n* // returns true\n*\n* @example\n* import Float64Array from '@stdlib/array-float64';\n* import DataView from '@stdlib/array-dataview';\n* import readDataView from '@stdlib/strided-base-read-dataview';\n*\n* var x = new Float64Array( [ 1.0, 2.0, 3.0, 4.0 ] );\n* var view = new DataView( x.buffer );\n*\n* var y = new Float64Array( x.length );\n* var out = readDataView.ndarray( x.length, view, 8, 0, y, 1, 0, true );\n* // e.g., returns <Float64Array>[ 1.0, 2.0, 3.0, 4.0 ]\n*\n* var bool = ( out === y );\n* // returns true\n*/\n\n// MODULES //\n\nimport setReadOnly from '@stdlib/utils-define-nonenumerable-read-only-property';\nimport main from './main.js';\nimport ndarray from './ndarray.js';\n\n\n// MAIN //\n\nsetReadOnly( main, 'ndarray', ndarray );\n\n\n// EXPORTS //\n\nexport default main;\n"],"names":["METHOD_TABLE","float64","float32","float16","int64","int32","int16","int8","uint64","uint32","uint16","uint8","indexed","dtype","N","view","strideView","offsetView","out","strideOut","offsetOut","littleEndian","data","io","iv","m","i","complex","nbytes","bytesPerElement","readDataView","obj","arraylike2object","accessorProtocol","isComplex128Array","reinterpret128","isComplex64Array","reinterpret64","isBooleanArray","reinterpretBoolean","set","accessors","ndarray","stride2offset","setReadOnly","main"],"mappings":";;2jCAoCA,IAAIA,EAAe,CAClBC,QAAW,aACXC,QAAW,aACXC,QAAW,aACXC,MAAS,cACTC,MAAS,WACTC,MAAS,WACTC,KAAQ,UACRC,OAAU,eACVC,OAAU,YACVC,OAAU,YACVC,MAAS,YAkCV,SAASC,EAASC,EAAOC,EAAGC,EAAMC,EAAYC,EAAYC,EAAKC,EAAWC,EAAWC,GACpF,IAAIC,EACAC,EACAC,EACAC,EACAC,EAQJ,IANAD,EAAIzB,EAAca,GAElBS,EAAOJ,EAAII,KAEXC,EAAKH,EACLI,EAAKP,EACCS,EAAI,EAAGA,EAAIZ,EAAGY,IACnBJ,EAAMC,GAAOR,EAAMU,GAAKD,EAAIH,GAC5BE,GAAMJ,EACNK,GAAMR,CAER,CA8BA,SAASW,EAASd,EAAOC,EAAGC,EAAMC,EAAYC,EAAYC,EAAKC,EAAWC,EAAWC,GACpF,IAAIO,EACAN,EACAC,EACAC,EACAC,EACAC,EAaJ,IAXAD,EAAIzB,EAAca,GAClBe,EAASC,EAAiBhB,GAE1BS,EAAOJ,EAAII,KAGXH,GAAa,EAGbI,EAFAH,GAAa,EAGbI,EAAKP,EACCS,EAAI,EAAGA,EAAIZ,EAAGY,IACnBJ,EAAMC,GAAOR,EAAMU,GAAKD,EAAIH,GAC5BC,EAAMC,EAAG,GAAMR,EAAMU,GAAKD,EAAGI,EAAQP,GACrCE,GAAMJ,EACNK,GAAMR,CAER,CAoFA,SAASc,EAAchB,EAAGC,EAAMC,EAAYC,EAAYC,EAAKC,EAAWC,EAAWC,GAClF,IAAIU,EAEJ,OAAKjB,GAAK,EACFI,GAERa,EAAMC,EAAkBd,IACfe,iBAEHC,EAAmBhB,IACvBa,EAAIT,KAAOa,EAAgBjB,EAAK,GAChCS,EAAS,UAAWb,EAAGC,EAAMC,EAAYC,EAAYc,EAAKZ,EAAWC,EAAWC,GACzEH,GAEHkB,EAAkBlB,IACtBa,EAAIT,KAAOe,EAAenB,EAAK,GAC/BS,EAAS,UAAWb,EAAGC,EAAMC,EAAYC,EAAYc,EAAKZ,EAAWC,EAAWC,GACzEH,GAGHoB,EAAgBpB,IACpBa,EAAIT,KAAOiB,EAAoBrB,EAAK,GACpCN,EAAS,QAASE,EAAGC,EAAMC,EAAYC,EAAYc,EAAKZ,EAAWC,EAAWC,GACvEH,IA5EV,SAAoBL,EAAOC,EAAGC,EAAMC,EAAYC,EAAYC,EAAKC,EAAWC,EAAWC,GACtF,IAAIC,EACAkB,EACAjB,EACAC,EACAC,EACAC,EASJ,IAPAD,EAAIzB,EAAca,GAElBS,EAAOJ,EAAII,KACXkB,EAAMtB,EAAIuB,UAAW,GAErBlB,EAAKH,EACLI,EAAKP,EACCS,EAAI,EAAGA,EAAIZ,EAAGY,IACnBc,EAAKlB,EAAMC,EAAIR,EAAMU,GAAKD,EAAIH,IAC9BE,GAAMJ,EACNK,GAAMR,CAGR,CA0DEyB,CAAW,UAAW3B,EAAGC,EAAMC,EAAYC,EAAYc,EAAKZ,EAAWC,EAAWC,GAC3EH,IAQRN,EANmB,OAAdmB,EAAIlB,OAAgC,YAAdkB,EAAIlB,MAEzB,UAEAkB,EAAIlB,MAEGC,EAAGC,EAAMC,EAAYC,EAAYc,EAAKZ,EAAWC,EAAWC,GAClEH,EACR,CC9NA,SAASY,EAAchB,EAAGC,EAAMC,EAAYE,EAAKC,EAAWE,GAC3D,OAAOqB,EAAS5B,EAAGC,EAAMC,EAAY2B,EAAe7B,EAAGE,GAAcE,EAAKC,EAAWwB,EAAe7B,EAAGK,GAAaE,EACrH,CCUAuB,EAAAC,EAAA,UAAAH"}